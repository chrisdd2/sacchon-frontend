<div *ngIf='!loading;else spin' class="row">
    <h5>{{desc}}&nbsp;{{value}}&nbsp;<i>{{unit}}</i></h5>
    <h6 class="text-muted">{{ period}} <i (click)='changing=!changing' class="fake-link bi bi-gear-fill"></i></h6>
    <div class='mt-1' *ngIf='changing'>
        <form [formGroup]='form' novalidate>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="date-start">from</label>
                        <input #date_start formControlName='date_start' type="date" class="form-control"
                            id="date_start">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="date-end">to</label>
                        <input #date_end formControlName='date_end' type="date" class="form-control" id="date_end">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div *ngIf="form.get('date_start').errors?.dateLimit && form.get('date_start').touched"
                        class="alert alert-danger my-1"> Start date cannot be further than today </div>
                    <div *ngIf="form.get('date_end').errors?.dateLimit && form.get('date_end').touched"
                        class="alert alert-danger my-1"> End date cannot be further than today </div>
                    <div *ngIf="form.errors?.dateRange && form.get('date_start').touched && form.get('date_end').touched"
                        class="alert alert-danger my-1"> Start date cannot be larger than end date </div>
                </div>
            </div>
            <div class="row my-2">
                <div class="form-group">
                    <button type="button" (click)='onSubmit(date_start.valueAsDate,date_end.valueAsDate)' class="btn btn-primary">Save</button>
                    <button type="button" class="ms-1 btn btn-primary" (click)='changing=false'>Cancel</button>
                </div>
            </div>
        </form>
    </div>
</div>
<ng-template #spin>
    <div #spin class='spinner-border text-primary d-block mx-auto my-3' role='status'></div>
</ng-template>